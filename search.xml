<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[透明背景,可编辑下拉框]]></title>
      <url>xjinjin.net/2016/07/15/transparent-editable-select/</url>
      <content type="html"><![CDATA[<p>可编辑的下拉框似乎已经有很多实现了，无非是加上一个input，配合监听事件，不过小金金偏爱透明的控件，所有实现有点变化。<br>依旧是非图片实现（没准，有图片会更方便）</p>
<p>实现效果<br><img src="http://ww4.sinaimg.cn/large/904e587bgw1f5vjav1q5ig204102ndgw.gif" alt="透明可编辑下拉框"></p>
<p><excerpt in="" index="" |="" 首页摘要=""></excerpt></p>
<ul>
<li><a id="more"></a>
<the rest="" of="" contents="" |="" 余下全文="">

</the></li>
</ul>
<h2 id="基本实现"><a href="#基本实现" class="headerlink" title="基本实现"></a>基本实现</h2><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"select-box"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">maxlength</span>=<span class="string">"2"</span> <span class="attr">value</span>=<span class="string">"10"</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">select</span> <span class="attr">class</span>=<span class="string">"show-select"</span>&gt;</span><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">'data'</span> <span class="attr">class</span>=<span class="string">"bottom-select"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">option</span>&gt;</span>5<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">option</span>&gt;</span>10<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">option</span>&gt;</span>20<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="selector-tag">select</span>&#123;</span><br><span class="line">				<span class="attribute">position</span>: absolute;</span><br><span class="line">				<span class="attribute">background</span>: none;</span><br><span class="line">				<span class="attribute">color</span>:white;</span><br><span class="line">				<span class="attribute">width</span>:<span class="number">50px</span>;</span><br><span class="line">				<span class="attribute">height</span>:<span class="number">20px</span>;</span><br><span class="line">				<span class="attribute">top</span>:<span class="number">40px</span>;<span class="attribute">left</span>:<span class="number">75px</span>;</span><br><span class="line">				<span class="attribute">border-color</span>: white;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="selector-class">.show-select</span> &#123;</span><br><span class="line">				<span class="attribute">z-index</span>:<span class="number">1</span>;</span><br><span class="line">				<span class="attribute">pointer-events</span>: none;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="selector-class">.bottom-select</span> &#123;</span><br><span class="line">				<span class="attribute">z-index</span>:<span class="number">0</span>;</span><br><span class="line">				<span class="attribute">color</span>:transparent</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="selector-tag">input</span> &#123;</span><br><span class="line">				<span class="attribute">z-index</span>: <span class="number">2</span>;</span><br><span class="line">				<span class="attribute">color</span>: white;</span><br><span class="line">				<span class="attribute">background</span>: none;</span><br><span class="line">				<span class="attribute">position</span>: absolute;</span><br><span class="line">				<span class="attribute">width</span>:<span class="number">30px</span>;</span><br><span class="line">				<span class="attribute">height</span>:<span class="number">20px</span>;<span class="attribute">line-height</span>: <span class="number">20px</span>;</span><br><span class="line">				<span class="attribute">left</span>:<span class="number">80px</span>;</span><br><span class="line">				<span class="attribute">top</span>:<span class="number">38px</span>;</span><br><span class="line">				<span class="attribute">text-align</span>: center;</span><br><span class="line">				<span class="attribute">border</span>: none;</span><br><span class="line">			&#125;</span><br></pre></td></tr></table></figure>
<h3 id="详解"><a href="#详解" class="headerlink" title="详解"></a>详解</h3><p>不变的结构是，用input覆盖在select上响应用户输入，排版对齐什么不用说啦<br>结合css来看，回答几个问题</p>
<ol>
<li>为什么要用两个select<br>A: 由于所有控件都是透明背景，所以为了既显示出select的可点击部分，又隐藏select中间的内容部分，使用show-select显示控件，使用bottom-select响应事件</li>
<li>pointer-events是什么<br>A: pointer-events设为none,<strong>则该元素永远不会成为鼠标事件的target</strong>,故可以点击到最底层的bottom-select<br>具体使用可见<a href="http://www.css88.com/book/css/properties/user-interface/pointer-events.htm" target="_blank" rel="external">pointer-events属性详解</a></li>
<li>这样就够了嘛<br>A: 当然…..不够，还需要js监听select的change事件<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#data'</span>).change(<span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    $(<span class="string">'input'</span>).val($(<span class="string">'#data'</span>).find(<span class="string">'option:selected'</span>).text())</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>
</li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[web app透明渐变的导航栏]]></title>
      <url>xjinjin.net/2016/07/06/transparent-nav/</url>
      <content type="html"><![CDATA[<p>这种透明渐变的导航栏就是我们经常看到的随用户滚动改变透明度的导航栏，本次主要通过background-color的rgba值来实现</p>
<p>原理：监听window的scroll事件，根据滚动值动态设置rgba值</p>
<p><excerpt in="" index="" |="" 首页摘要=""></excerpt></p>
<ul>
<li><a id="more"></a>
<the rest="" of="" contents="" |="" 余下全文="">

</the></li>
</ul>
<p>下图为一个简单的实现效果<br><img src="http://ww3.sinaimg.cn/large/904e587bjw1f5kfdid90og20940fcduf.gif" alt="实现效果"></p>
<h2 id="最简实现"><a href="#最简实现" class="headerlink" title="最简实现"></a>最简实现</h2><p>html,css准备,一个nav bar，大家都会写的咯^.^<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">header</span> <span class="attr">id</span>=<span class="string">"header"</span> <span class="attr">style</span>=<span class="string">"background-color: rgba(247,247,247,0)"</span> <span class="attr">class</span>=<span class="string">"transparent_nav"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"img/back.png"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>导航栏<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.transparent_nav</span>&#123;</span><br><span class="line">      <span class="attribute">position</span>: fixed;</span><br><span class="line">      <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">      <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">      <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">44px</span>;</span><br><span class="line">      <span class="attribute">display</span>: block;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>接下来就是js部分，将window.scrollY减去一个基线值，如0,再将差与一个固定的offset值比较，如150，得出此时的rgba中的a值<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> header = <span class="built_in">document</span>.getElementById(<span class="string">"header"</span>)</span><br><span class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">"scroll"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// top-0  offset-150</span></span><br><span class="line">    header.style.backgroundColor = <span class="string">"rgba(247,247,247,"</span>+(<span class="built_in">window</span>.scrollY<span class="number">-0</span>)/<span class="number">150</span>+<span class="string">")"</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></p>
<h2 id="进阶实现"><a href="#进阶实现" class="headerlink" title="进阶实现"></a>进阶实现</h2><p>将透明渐变方法封装一下，使得其可复用<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Transparent = <span class="function"><span class="keyword">function</span>(<span class="params">element,option</span>)</span>&#123;</span><br><span class="line">			<span class="keyword">this</span>.element = element;</span><br><span class="line">			<span class="keyword">this</span>.option = option || &#123;</span><br><span class="line">				offset:<span class="number">150</span>,</span><br><span class="line">				top:<span class="number">0</span>,</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">this</span>._style = <span class="keyword">this</span>.element.style</span><br><span class="line">			<span class="keyword">this</span>._bgColor = <span class="keyword">this</span>._style.backgroundColor</span><br><span class="line">			<span class="keyword">var</span> color = getColor(<span class="keyword">this</span>._bgColor)</span><br><span class="line">			<span class="keyword">this</span>.R = color[<span class="number">0</span>]</span><br><span class="line">			<span class="keyword">this</span>.G = color[<span class="number">1</span>]</span><br><span class="line">			<span class="keyword">this</span>.B = color[<span class="number">2</span>]</span><br><span class="line">			<span class="keyword">this</span>.handleScroll = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">				<span class="keyword">this</span>._style.backgroundColor = <span class="string">"rgba("</span>+<span class="keyword">this</span>.R+<span class="string">","</span>+<span class="keyword">this</span>.G+<span class="string">","</span>+<span class="keyword">this</span>.B+<span class="string">","</span>+(<span class="built_in">window</span>.scrollY-<span class="keyword">this</span>.option.top)/<span class="keyword">this</span>.option.offset+<span class="string">")"</span></span><br><span class="line">			&#125;</span><br><span class="line">	        <span class="built_in">window</span>.addEventListener(<span class="string">'scroll'</span>, <span class="keyword">this</span>.handleScroll);</span><br><span class="line">		&#125;</span><br><span class="line">	  Transparent(header)</span><br></pre></td></tr></table></figure></p>
<p>其中，getColor方法的作用是提取rgba的四个参数值，以数组形式返回，可以通过正则匹配，或者最简单的substring,split,想怎么实现这么实现咯！！</p>
<p>就这么简单就完啦，撒花，撒花！！</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[自定义android时间轴控件]]></title>
      <url>xjinjin.net/2016/06/03/timeline-of-android/</url>
      <content type="html"><![CDATA[<p>其实没什么技术难点，采用原生的ListView实现，重点反而在layout布局上(RelativeLayout真是强大)。</p>
<p>先来展示一下最终效果</p>
<p><excerpt in="" index="" |="" 首页摘要=""></excerpt></p>
<ul>
<li><a id="more"></a>
<the rest="" of="" contents="" |="" 余下全文=""><br><img src="http://ww4.sinaimg.cn/mw690/ea514745jw1f4iieg7126j20u01e0428.jpg" width="300" height="auto" alt="时间轴见图"><br><img src="http://ww2.sinaimg.cn/mw690/ea514745jw1f4iivvvv33j20u01e0gou.jpg" width="300" height="auto" alt="时间轴见图"></the></li>
</ul>
<h2 id="最简实现"><a href="#最简实现" class="headerlink" title="最简实现"></a>最简实现</h2><h3 id="第一步，准备layout文件"><a href="#第一步，准备layout文件" class="headerlink" title="第一步，准备layout文件"></a>第一步，准备layout文件</h3><p>首先是timeline_item.layout, 具体样式无妨，只是要保证item在listview中展示时有时间轴效果<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span> <span class="attr">android:layout_height</span>=<span class="string">"100dp"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">RelativeLayout</span></span><br><span class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/left_wrap"</span></span><br><span class="line">        <span class="attr">android:layout_alignParentLeft</span>=<span class="string">"true"</span></span><br><span class="line">        <span class="attr">android:layout_marginLeft</span>=<span class="string">"30dp"</span></span><br><span class="line">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span><br><span class="line">        <span class="attr">android:layout_height</span>=<span class="string">"fill_parent"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">View</span></span><br><span class="line">        <span class="attr">android:layout_width</span>=<span class="string">"2dp"</span></span><br><span class="line">        <span class="attr">android:layout_height</span>=<span class="string">"fill_parent"</span></span><br><span class="line">        <span class="attr">android:layout_centerInParent</span>=<span class="string">"true"</span></span><br><span class="line">        <span class="attr">android:background</span>=<span class="string">"#000"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--圆形背景图，xml实现--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">RelativeLayout</span></span><br><span class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/line_circle"</span></span><br><span class="line">        <span class="attr">android:layout_width</span>=<span class="string">"40dp"</span></span><br><span class="line">        <span class="attr">android:layout_height</span>=<span class="string">"40dp"</span></span><br><span class="line">        <span class="attr">android:background</span>=<span class="string">"@drawable/circle"</span></span><br><span class="line">        <span class="attr">android:layout_centerInParent</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!--可代码控制显示不同的icon--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span><br><span class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/line_icon"</span></span><br><span class="line">            <span class="attr">android:layout_width</span>=<span class="string">"20dp"</span></span><br><span class="line">            <span class="attr">android:layout_height</span>=<span class="string">"20dp"</span></span><br><span class="line">            <span class="attr">android:layout_centerInParent</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span><br><span class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/line_info"</span></span><br><span class="line">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span><br><span class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span><br><span class="line">        <span class="attr">android:text</span>=<span class="string">"我是一条时间信息"</span></span><br><span class="line">        <span class="attr">android:layout_centerVertical</span>=<span class="string">"true"</span></span><br><span class="line">        <span class="attr">android:layout_marginLeft</span>=<span class="string">"20dp"</span></span><br><span class="line">        <span class="attr">android:textSize</span>=<span class="string">"20dp"</span></span><br><span class="line">        <span class="attr">android:layout_toRightOf</span>=<span class="string">"@+id/left_wrap"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span><br><span class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/line_time"</span></span><br><span class="line">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span><br><span class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span><br><span class="line">        <span class="attr">android:text</span>=<span class="string">"2015-12-13"</span></span><br><span class="line">        <span class="attr">android:layout_alignLeft</span>=<span class="string">"@+id/line_info"</span></span><br><span class="line">        <span class="attr">android:layout_below</span>=<span class="string">"@+id/line_info"</span></span><br><span class="line">        <span class="attr">android:layout_marginTop</span>=<span class="string">"10dp"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>给出drawable/circle.xml文件，实现了一个圆形背景，当然你也可以用图片，或者去掉<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span> &gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">"35dp"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">size</span></span><br><span class="line">        <span class="attr">android:height</span>=<span class="string">"70dp"</span></span><br><span class="line">        <span class="attr">android:width</span>=<span class="string">"70dp"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">gradient</span></span><br><span class="line">        <span class="attr">android:startColor</span>=<span class="string">"#9933cc"</span></span><br><span class="line">        <span class="attr">android:endColor</span>=<span class="string">"#aa66cc"</span></span><br><span class="line">        <span class="attr">android:angle</span>=<span class="string">"90"</span></span><br><span class="line">        /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">stroke</span></span><br><span class="line">        <span class="attr">android:width</span>=<span class="string">"1dp"</span></span><br><span class="line">        <span class="attr">android:color</span>=<span class="string">"#ffff"</span>&gt;</span><span class="tag">&lt;/<span class="name">stroke</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">padding</span> <span class="attr">android:left</span>=<span class="string">"5dp"</span></span><br><span class="line">        <span class="attr">android:right</span>=<span class="string">"5dp"</span></span><br><span class="line">        <span class="attr">android:top</span>=<span class="string">"5dp"</span></span><br><span class="line">        <span class="attr">android:bottom</span>=<span class="string">"5dp"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>还需要一个activity_time.layout文件存放我们的listview，注意listview的默认divider要去掉，否则会有分割线<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ListView</span></span><br><span class="line">    <span class="attr">android:id</span>=<span class="string">"@+id/time_list"</span></span><br><span class="line">    <span class="attr">android:background</span>=<span class="string">"@android:color/transparent"</span></span><br><span class="line">    <span class="attr">android:layout_width</span>=<span class="string">"fill_parent"</span></span><br><span class="line">    <span class="attr">android:headerDividersEnabled</span>=<span class="string">"false"</span></span><br><span class="line">    <span class="attr">android:footerDividersEnabled</span>=<span class="string">"false"</span></span><br><span class="line">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span>&gt;</span><span class="tag">&lt;/<span class="name">ListView</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>如果分割线还在，别担心，我们可以在代码里设置setDivier(null)</p>
<h3 id="第二步：准备listview的Adapter-新建一个TimeLineAdapter-继承BaseAdapter，给出部分关键代码"><a href="#第二步：准备listview的Adapter-新建一个TimeLineAdapter-继承BaseAdapter，给出部分关键代码" class="headerlink" title="第二步：准备listview的Adapter,新建一个TimeLineAdapter,继承BaseAdapter，给出部分关键代码"></a>第二步：准备listview的Adapter,新建一个TimeLineAdapter,继承BaseAdapter，给出部分关键代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimeLineAdpater</span> <span class="keyword">extends</span> <span class="title">BaseAdapter</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Context mc;</span><br><span class="line">    <span class="keyword">private</span> String[] data = &#123;<span class="string">"开心"</span>,<span class="string">"快乐"</span>,<span class="string">"美丽"</span>,<span class="string">"富有"</span>,<span class="string">"爱情"</span>,<span class="string">"啦啦"</span>&#125;;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TimeLineAdpater</span><span class="params">(Context text)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.mc = text;</span><br><span class="line">    &#125;</span><br><span class="line">    ......</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> View <span class="title">getView</span><span class="params">(<span class="keyword">int</span> pos, View view, ViewGroup par)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(view == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="comment">// 参数加入par,让item view保持原有的高度</span></span><br><span class="line">            View item = LayoutInflater.from(mc).inflate(R.layout.timeline_item,par,<span class="keyword">false</span>);</span><br><span class="line">            TextView text = (TextView)item.findViewById(R.id.line_info);</span><br><span class="line">            text.setText(text.getText()+data[pos]);</span><br><span class="line"></span><br><span class="line">            ImageView image = (ImageView)item.findViewById(R.id.line_icon);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 一个android icon库，强烈推荐 github地址: https://github.com/mikepenz/Android-Iconics</span></span><br><span class="line">            IconicsDrawable icon = <span class="keyword">new</span> IconicsDrawable(mc)</span><br><span class="line">                    .icon(GoogleMaterial.Icon.gmd_today)</span><br><span class="line">                    .color(Color.WHITE);</span><br><span class="line">            image.setImageDrawable(icon);</span><br><span class="line">            view = item;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> view;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="最后一步：创建TimeActiviy文件，将TimeLineAdapter-Set到ListView上"><a href="#最后一步：创建TimeActiviy文件，将TimeLineAdapter-Set到ListView上" class="headerlink" title="最后一步：创建TimeActiviy文件，将TimeLineAdapter Set到ListView上"></a>最后一步：创建TimeActiviy文件，将TimeLineAdapter Set到ListView上</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimeActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_time);</span><br><span class="line">        ListView list = (ListView) findViewById(R.id.time_list);</span><br><span class="line">        list.setDivider(<span class="keyword">null</span>);</span><br><span class="line">        list.setAdapter(<span class="keyword">new</span> TimeLineAdpater(<span class="keyword">this</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样，就可以达到如上图1一样的效果啦。</p>
<h2 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h2><p>1.如上图2，时间轴可以放在中间（类似记账软件），根据奇偶或一定规则，通过LayoutParams调整item的布局或者干脆inflate不同的layout</p>
<p>2.item布局自带一定的点击效果，可以自己调整，比如点击小图标或某一个item跳转到详情页等等</p>
]]></content>
    </entry>
    
  
  
</search>
